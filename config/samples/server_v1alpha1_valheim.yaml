apiVersion: server.gamely.io/v1alpha1
kind: Valheim
metadata:
  labels:
    app.kubernetes.io/name: valheim
    app.kubernetes.io/instance: valheim-sample
    app.kubernetes.io/part-of: gamely
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: gamely
  name: valheim-sample
spec:
  server:
    name: "Test Server"
    worldNameOrSeed: "dedicated"
    additionalEnv:
      test: "true"
  service:
    type: NodePort
  backups:
    secretKeyRef:
      name: backups
    endpoint: minio.default:9000
    bucket: backups
    storage:
      size: 6Gi
  storage:
    size: 2Gi
  hooks:
    postBackupHook: |
      echo "Backup created at @BACKUP_FILE@"